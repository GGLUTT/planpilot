# Локальне тестування Telegram Mini App

Цей посібник допоможе вам налаштувати локальне тестування вашого Telegram Mini App без необхідності постійного доступу до зовнішнього домену.

## Швидкий старт

1. Запустіть локальний сервер розробки вашого додатку:
   ```
   cd client
   npm run dev
   ```

2. Відкрийте файл `local-test.html` у вашому браузері
   - Це відкриє тестову сторінку з емуляцією Telegram WebApp

3. Натисніть кнопку "Відкрити додаток" для завантаження вашого додатку у фрейм

## Як це працює

Створені тестові файли забезпечують:
1. Емуляцію API Telegram WebApp
2. Можливість перемикатися між різними тестовими користувачами
3. Зміну параметрів запуску
4. Відображення логів та даних Telegram

## Файли для тестування

- `local-test.html` - Основна тестова сторінка з інтерфейсом для керування тестуванням
- `test-telegram-data.js` - Утиліта для керування тестовими даними Telegram

## Тестування різних сценаріїв

### Тестування різних користувачів

Використовуйте кнопки в секції "Тестові користувачі":
- **Звичайний користувач** - Стандартний користувач
- **Адміністратор** - Користувач з прапорцем `is_admin`
- **Новий користувач** - Користувач без username та last_name

### Тестування з різними параметрами запуску

1. Введіть бажаний параметр у поле "Параметр запуску"
2. Натисніть кнопку "Встановити"
3. Оновіть додаток, щоб застосувати нові параметри

### Програмне керування через консоль

Ви також можете використовувати утиліту через консоль браузера:

```javascript
// Перемикання між користувачами
TelegramTester.switchToUser('default');
TelegramTester.switchToUser('admin');
TelegramTester.switchToUser('newUser');

// Встановлення параметра запуску
TelegramTester.setStartParam('my-custom-param');

// Створення власного користувача
TelegramTester.updateUser({
  id: 123123123,
  first_name: "Custom",
  last_name: "User",
  username: "customuser",
  language_code: "en",
  // Будь-які додаткові поля
  custom_field: "custom value"
});
```

## Модифікація тестових даних

Ви можете додати власних тестових користувачів, відредагувавши об'єкт `testUsers` у файлі `test-telegram-data.js`.

## Відмінності від реального Telegram Mini App

При використанні локального тестування пам'ятайте про декілька обмежень:

1. Деякі методи WebApp можуть працювати інакше, ніж в реальному середовищі
2. Безпека ініціалізаційних даних не перевіряється
3. Деякі вузькоспеціалізовані методи (haptic feedback, scan QR, тощо) доступні тільки в фреймворку Telegram

## Рекомендації для реального тестування

Для повного тестування вашого додатку рекомендується:

1. Використовувати тунелювання для тестування реального бота:
   - ngrok: `ngrok http 5173`
   - localtunnel: `lt --port 5173`
   - serveo: `ssh -R 80:localhost:5173 serveo.net`

2. Оновити URL в команді `/start` вашого бота на тимчасовий URL тунелювання

3. Провести фінальне тестування через реального бота перед публікацією 